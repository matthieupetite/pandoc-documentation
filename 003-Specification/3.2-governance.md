
# Core ressources

## Management groups and subscription organization

### Project Requirements

The project requirements related to the management group and subscription organization are listed in the following table.

| ID           | Name                                                                                                                                                     |
| ------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------- |
| OCB-AZ-MG-01 | April’s must have a separate hierarchy of management group to facilitate the IAM and policy management between the new landing zone and the legacy ones. |
| OCB-AZ-MG-02 | The management group tree must be fewer than 6 levels deep (Azure restriction)                                                                           |
| OCB-AZ-MG-03 | Subscriptions associate to the core services of an enterprise scale landing zone must be grouped in a dedicated management group                         |
| OCB-AZ-MG-04 | Each application subscription must be linked to one dedicated management group                                                                           |
| OCB-AZ-MG-05 | Non-production assets must be isolated in different management group as soon as possible.                                                                |
| OCB-AZ-MG-06 | The subscription created before the project must be replaced in the management group hierarchy                                                           |
| OCB-AZ-MG-07 | A naming convention must be defined for management group                                                                                                 |
| OCB-AZ-MG-08 | A naming convention must be defined for subscriptions created in the project                                                                             |

: Management groups and subscription requirements

### Schema

The following schema illustrates the management groups and subscriptions and organizations in the April’s Tenant. It outline the management group hierarchy and the subscriptions associated with each management group. The "mg-datascience-hpr" will be added in the "mg-horsproduction" as the brand new landing zone for the data science team is considered as outside 
production.

![Management Groups Schema](./assets/3.2-governance/management-groups.png)

### Description

The management group topology is a 5-level group tree. This group hierarchy allows aggregating policies and initiatives assignments via Azure Policy and 
allows deploying the RBAC authorizations easily across the tenant.

The table below presents each level of management group’s hierarchy in the perimeter of the project.

| Level | Management Group                       | Sample value      | Management group level description  |
| :---- | :------------------------ | :---------------- | :-----------------------------------------------------------------|
| 0     | Tenant Root level         | Tenant Root Group | Root of the management group tree                                 |
| 1     | Company level             | mg-april          | This level is created here for future needs. If April needs to create a separate structure for management groups for testing purpose, having that level will permit performing those actions without impact on the production side.                      |
| 2     | Enterprise Scale Structure main level  | mg-platform       | That management group level separates the core landing zones from those dedicated to the applications or subsidiaries landing zones. That separation of concern gives the ability to declare specific policy regarding the critical landing zones (the core one) and others for applications landing zones. |
| 3     | Enterprise Scale Structure sub level 1 |                   | For core landing zones: This level is used to separate the different domain of responsibility related to the core landing zones such as the IAM, the management, the DevOps part,… For applications landing zones: That level is dedicated to Business Unit that will deploy azure components for their business needs. |
| 4     | Enterprise Scale Structure sub level 2 |                   | Only used for applications landing zones. That level is dedicated to separate the production and the preproduction platform per business unit.|

: Management group level purpose

The next table describes the management groups that are implemented in the project associated with their level.

| Management group  | Level | Description   |
| ----------------- | :---: | :---------------------------------------------------------------------------------|
| Tenant Root Group |   0   | Top level management group      |
| mg-april          |   1   | The April management group that hold all the Azure resources.   |
| mg-platform       |   2   | The assets under the responsibility of April. will be deployed in Azure by following the Enterprise Scale Landing zone patterns. That management group is dedicated to regrouping all objects related to the core component of the enterprise scale landing zone.        |
| mg-landing_zones   |   2   | This management group is related to all April’s application landing zones |
| mg-sandbox        |   2   | This management group will hold the sandbox subscriptions dedicated as training zones to the IT and development teams. Resources declared in subscriptions under that management group cannot be used for production and related policies will be designed consequently. |
| mg-decomissionned |   2   | This management group will hold unused subscriptions  |
| mg-legacy         |   2   | This management group will hold legacy assets (ressources before the ES lz) |
| mg-default        |   2   | This management group will hold new subscription before mg assignation |
| mg-identity       |   3   | This management group will hold the subscription dedicated to the identity management of the project |
| mg-devops         |   3   | This management group will hold the subscription dedicated to the DevOps management of the project (mainly for storing TFState) |
| mg-management     |   3   | This management group will hold the subscription dedicated to the management of the project (Dashboarding, log analytics, …) |
| mg-connectivity   |   3   | This management group will hold the subscription dedicated to the connectivity of the project (vWan, Firewall, …) |
| mg-production     |   3   | This management group groups all landing zones that hold workloads for the production |
| mg-preproduction  |   3   | This management group regroups all landing zones that hold workloads for the pre production |
| mg-horsproduction |   3   | This management group regroups all landing zones that hold workloads outside production |
| mg-mkp-prod       |   3   | This management group hold marketplace production subscription |
| mg-mkp-preprod    |   3   | This management group hold marketplace pre production subscription  |
| mg-mkp-hpr        |   3   | This management group hold marketplace outside production subscriptions |
| mg-data-hpr       |   3   | This management group hold the data platform outside production subscription |
| mg-data-ppr       |   3   | This management group hold the data platform pre production subscription     |
| mg-data-pro       |   3   | This management group hold the data platform production subscription         |

: Management group description

Subscriptions help us to have an isolated management, billing, and scale within the tenant. Tow subscriptions are necessary to support the project:

| Subscription      | Owner | Description                                                        |
| :---------------- | :---- | :----------------------------------------------------------------- |
| sub-data-ppr | April | This subscription is dedication to the pre production data platform |
| sub-data-pro | April | This subscription is dedication to the production data platform |

:Subscriptions list in scope of the project

Note: All other subscriptions are out of the scope of this document. Nevertheless, it is recommended for April to follow the same naming guidelines when adding new subscriptions.

Here is the Subscription Id Table:

| Subscription           | Subscription ID                      |
| :----------------------| :----------------------------------- |
| sub-data-ppr           |                                      |
| sub-data-pro           |                                      |

:Subscription ids list

## Security governance and compliance

This critical design area establishes the policies to be put in place as well as their respective scope.

### Project requirements

The project requirements related to the security and compliance are listed in the following table.

| ID            | Name                                                                                     |
| ------------- | ---------------------------------------------------------------------------------------- |
| OCB-AZ-SEC-01 | April’s tenant must implement security policies at management group level                |

: Management groups and subscription requirements

### Description

Azure Policy helps to enforce organizational standards and to assess compliance at-scale. Through its compliance dashboard, it provides an aggregated view to evaluate the overall state of the environment, with the ability to drill down to the per-resource, per-policy granularity. It also helps to bring your resources to compliance through bulk remediation for existing resources and automatic remediation for new resources.

Common use cases for Azure Policy include implementing governance for resource consistency, regulatory compliance, security, cost, and management. Policy definitions for these common use cases are already available in your Azure environment as built-ins to help you get started.

The description of Azure policy can be found here: [https://docs.microsoft.com/en-us/azure/governance/policy/overview](https://docs.microsoft.com/en-us/azure/governance/policy/overview)

Azure Policies for all Landing Zones are managed centraly by SD Cloud team.
